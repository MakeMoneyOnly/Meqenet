# Meqenet.et Pre-Commit Hook
# Optimized FinTech Security & Quality Gate

echo "🚀 Meqenet.et Pre-Commit Quality Checks"
echo "========================================"

# Set NODE_OPTIONS to prevent memory issues
export NODE_OPTIONS="--max-old-space-size=4096"

# Run lint-staged for staged files only (includes formatting and linting)
echo "📝 Running quality checks on staged files..."
pnpm exec lint-staged || {
  echo "❌ Pre-commit checks failed"
  echo ""
  echo "💡 Troubleshooting tips:"
  echo "   • Review the errors above and fix any code issues"
  echo "   • For ESLint errors, run: pnpm eslint --fix <file>"
  echo "   • For formatting issues, run: pnpm prettier --write <file>"
  echo "   • If memory issues persist, try staging fewer files"
  echo ""
  exit 1
}

echo "✅ All pre-commit checks passed!"
echo "🇪🇹 Code quality maintained for Ethiopian FinTech excellence!"