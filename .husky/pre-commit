# Meqenet.et Pre-Commit Hook
# Optimized FinTech Security & Quality Gate

echo "ğŸš€ Meqenet.et Pre-Commit Quality Checks"
echo "========================================"

# Set NODE_OPTIONS to prevent memory issues
export NODE_OPTIONS="--max-old-space-size=4096"

# Run lint-staged for staged files only (includes formatting and linting)
echo "ğŸ“ Running quality checks on staged files..."
pnpm exec lint-staged || {
  echo "âŒ Pre-commit checks failed"
  echo ""
  echo "ğŸ’¡ Troubleshooting tips:"
  echo "   â€¢ Review the errors above and fix any code issues"
  echo "   â€¢ For ESLint errors, run: pnpm eslint --fix <file>"
  echo "   â€¢ For formatting issues, run: pnpm prettier --write <file>"
  echo "   â€¢ If memory issues persist, try staging fewer files"
  echo ""
  exit 1
}

echo "âœ… All pre-commit checks passed!"
echo "ğŸ‡ªğŸ‡¹ Code quality maintained for Ethiopian FinTech excellence!"